function openNav(){document.getElementById("search").style.width="280px",document.getElementById("map").style.marginLeft="280px",document.getElementById("logo").style.marginLeft="280px",document.getElementById("map").style.width="calc(100% - 300px)"}function closeNav(){document.getElementById("search").style.width="0",document.getElementById("map").style.marginLeft="20px",document.getElementById("logo").style.marginLeft="70px",document.getElementById("map").style.width="calc(100% - 40px)"}
var Location=function(e){"use strict";this.title=ko.observable(e.title),this.id=ko.observable(e.id),this.marker=ko.observable(),this.address=ko.observable(""),this.rating=ko.observable(""),this.likes=ko.observable(""),this.photo=ko.observable("")},locations=[{title:"Walnut Creek Metropolitan Park",id:"4ae37a96f964a520a39521e3",coordinates:{lat:30.399123,lng:-97.679489}},{title:"Red Bud Isle",id:"49c1de70f964a520d7551fe3",coordinates:{lat:30.29082,lng:-97.786839}},{title:"Emma Long Metropolitan Park",id:"49f3314df964a5206b6a1fe3",coordinates:{lat:30.335234,lng:-97.838505}},{title:"Barton Creek Greenbelt",id:"4ae33705f964a520c69121e3",coordinates:{lat:30.243167,lng:-97.800045}},{title:"St. Edward's Park",id:"4b328c55f964a520530e25e3",coordinates:{lat:30.407556,lng:-97.791037}},{title:"River Place Nature Trail",id:"4da9e0594df01c19b17cabce",coordinates:{lat:30.356231,lng:-97.864022}}];
var austin={lat:30.2672,lng:-97.7431},styles=[{elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{color:"#f5f5f2"},{visibility:"on"}]},{featureType:"administrative",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"poi.attraction",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{visibility:"on"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.medical",stylers:[{visibility:"off"}]},{featureType:"poi.place_of_worship",stylers:[{visibility:"off"}]},{featureType:"poi.school",stylers:[{visibility:"off"}]},{featureType:"poi.sports_complex",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#ffffff"},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{visibility:"simplified"},{color:"#ffffff"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{color:"#ffffff"},{visibility:"off"}]},{featureType:"road.highway",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.arterial",stylers:[{color:"#ffffff"}]},{featureType:"road.local",stylers:[{color:"#ffffff"}]},{featureType:"poi.park",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{color:"#71c8d4"}]},{featureType:"landscape",stylers:[{color:"#e5e8e7"}]},{featureType:"poi.park",stylers:[{color:"#8ba129"}]},{featureType:"road",stylers:[{color:"#ffffff"}]},{featureType:"poi.sports_complex",elementType:"geometry",stylers:[{color:"#c7c7c7"},{visibility:"off"}]},{featureType:"water",stylers:[{color:"#a0d3d3"}]},{featureType:"poi.park",stylers:[{color:"#91b65d"}]},{featureType:"poi.park",stylers:[{gamma:1.51}]},{featureType:"road.local",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"geometry",stylers:[{visibility:"on"}]},{featureType:"poi.government",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"landscape",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{visibility:"simplified"}]},{featureType:"road.local",stylers:[{visibility:"simplified"}]},{featureType:"road"},{featureType:"road"},{},{featureType:"road.highway"}];
function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:austin,zoom:12,styles:styles}),ko.applyBindings(new AppViewModel)}function createMarker(e,n){return new google.maps.Marker({position:n,map:map,title:e,icon:"img/marker.png",animation:google.maps.Animation.DROP})}var map;
var foursquare_id="XRATIK2410KTJDQKQQLZRFWYE5FRIFYBH5N5CIL2AABCLVYV",foursquare_secret="OKBTT3QC2X5GPOSEZZMY4YABWLQ2DHFEDRGTLOLRD3BSMWBJ";
function AppViewModel(){var e=this;this.searchText=ko.observable(""),this.error=ko.observable(""),this.locationArray=ko.observableArray([]),this.visibleArray=ko.observableArray([]),locations.forEach(function(r){newLocation=new Location(r),newLocation.marker=createMarker(r.title,r.coordinates),e.locationArray.push(newLocation),e.visibleArray.push(newLocation)}),this.locationArray().forEach(function(e){$.ajax({url:"https://api.foursquare.com/v2/venues/"+e.id()+"?client_id="+foursquare_id+"&client_secret="+foursquare_secret+"&v=201701401&m=foursquare",dataType:"json",success:function(r){var a=r.response.venue,o=a.hasOwnProperty("location")?a.location:"";o.hasOwnProperty("address")&&e.address(o.address||"n/a");var t=a.hasOwnProperty("rating")?a.rating:"";e.rating(t||"n/a");var i=a.hasOwnProperty("likes")?a.likes:"";i.hasOwnProperty("summary")&&e.likes(i.summary||"n/a");var n=a.hasOwnProperty("bestPhoto")?a.bestPhoto:"";if(n.hasOwnProperty("prefix")&&n.hasOwnProperty("suffix")){var s=n.prefix+"300x300"+n.suffix;e.photo(s||"n/a")}},complete:function(r){var a='<div class="result-info"><p class="result-title">'+e.title()+'</p><p class="result-address">'+e.address()+'</p><p class="result-rating">'+e.rating()+'</p><p class="result-likes">'+e.likes()+"</p></div>",o=new google.maps.InfoWindow({content:a});e.marker.addListener("click",function(){o.open(map,e.marker),null!==e.marker.getAnimation()?e.marker.setAnimation(null):e.marker.setAnimation(google.maps.Animation.BOUNCE)})},error:function(r){var a='<div class="result-info"><p class="result-title">'+e.title+"</p></div>",o=new google.maps.InfoWindow({content:a});e.marker.addListener("click",function(){o.open(map,e.marker),null!==e.marker.getAnimation()?e.marker.setAnimation(null):e.marker.setAnimation(google.maps.Animation.BOUNCE)})}})}),this.filteredMarkers=ko.computed(function(){var r=e.searchText().toLowerCase();e.visibleArray.removeAll(),e.locationArray().forEach(function(a){a.marker.setVisible(!1),a.title().toLowerCase().indexOf(r)>-1&&e.visibleArray.push(a)}),0==e.visibleArray().length?e.error("No Results"):(e.error(""),e.visibleArray().forEach(function(e){e.marker.setVisible(!0)}))}),e.getInfo=function(e){map.setCenter(e.marker.position),map.setZoom(14),null!==e.marker.getAnimation()?e.marker.setAnimation(null):e.marker.setAnimation(google.maps.Animation.BOUNCE)}}